(window.webpackJsonp=window.webpackJsonp||[]).push([["admin.menu"],{"0e9e":function(e,t,o){"use strict";var r=o("453e");o.n(r).a},"10a5":function(e,t,o){"use strict";var r=o("31e1");o.n(r).a},"29c0":function(e,t,o){"use strict";o.r(t);var r=o("440a"),l=[{name:"id",label:"编号",show:!1},{name:"name",label:"名称",sortable:!0,width:"150"},{name:"typeName",label:"类型"},{name:"routeName",label:"路由名称",width:"150"},{name:"icon",label:"图标"},{name:"iconColor",label:"图标颜色"},{name:"level",label:"等级"},{name:"show",label:"是否显示"},{name:"sort",label:"排序"},{name:"targetName",label:"打开方式"}],n=o("68f2"),s={data:function(){return{form:{noLoading:!0,action:$api.admin.menu.add,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{submit:function(){this.submitBefore&&this.submitBefore(),this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick((function(){e.$refs.form.reset(),e.setProps()}))},setProps:function(){this.form.model.parentId=this.parent.id,this.form.model.sort=this.sort},onSuccess:function(e){this.form.model.id=e,this.$emit("success",{id:e,label:this.form.model.name,item:Object.assign({},this.form.model)})},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},a={mixins:[s]},i=o("2877"),m=Object(i.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,c=o("354f"),u={mixins:[s],components:{ModuleInfoSelect:c.a},data:function(){return{form:{model:{type:1,permissions:[],buttons:[]},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var e=[],t=this.form.model.moduleCode;return t?(this.$router.options.routes.forEach((function(o){o&&o.name&&o.name.toLowerCase().startsWith(t.toLowerCase())&&e.push({name:o.meta.title,icon:o.meta.icon||"",code:o.name.toLowerCase(),permissions:o.meta.permissions,buttons:o.meta.buttons})})),e):e}},methods:{submitBefore:function(){for(var e=this,t=function(){var t=e.routes[o],r=e.form.model;if(t.code===r.routeName)return r.routeName=t.code,r.permissions=t.permissions,r.buttons=[],t.buttons&&Object.keys(t.buttons).map((function(e){r.buttons.push(t.buttons[e])})),"break"},o=0;o<this.routes.length;o++){if("break"===t())break}},onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code,this.form.model.icon=o.icon;break}}}}},f=Object(i.a)(u,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:e.form.model.moduleCode,callback:function(t){e.$set(e.form.model,"moduleCode",t)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由：",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onRouteChange},model:{value:e.form.model.routeName,callback:function(t){e.$set(e.form.model,"routeName",t)},expression:"form.model.routeName"}},e._l(e.routes,(function(t){return o("el-option",{key:t.code,attrs:{label:t.name,value:t.code}},[o("span",[e._v(e._s(t.name)+"("+e._s(t.code)+")")])])})),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.model.routeName,callback:function(t){e.$set(e.form.model,"routeName",t)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:e.form.model.routeParams,callback:function(t){e.$set(e.form.model,"routeParams",t)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:e.form.model.routeQuery,callback:function(t){e.$set(e.form.model,"routeQuery",t)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,d={mixins:[n.b.select],data:function(){return{action:$api.admin.menu.getTargetSelect}}},p=Object(i.a)(d,void 0,void 0,!1,null,null,null).exports,b={mixins:[s],components:{TargetSelect:p},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},h=Object(i.a)(b,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:e.form.model.url,callback:function(t){e.$set(e.form.model,"url",t)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:e.form.model.target,callback:function(t){e.$set(e.form.model,"target",t)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:e.form.model.dialogWidth,callback:function(t){e.$set(e.form.model,"dialogWidth",t)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:e.form.model.dialogHeight,callback:function(t){e.$set(e.form.model,"dialogHeight",t)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:e.form.model.dialogFullscreen,callback:function(t){e.$set(e.form.model,"dialogFullscreen",t)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,g={mixins:[n.b.dialog],components:{NodeMenu:m,RouteMenu:f,LinkMenu:h},data:function(){return{tab:"node",dialog:{footer:!0,title:"添加菜单",icon:"add",width:"60%",class:"nm-admin-menu-add",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{onSubmit:function(){this.dialog.loading=!0,this.$refs[this.tab].submit()},onReset:function(){var e=this;this.$nextTick((function(){e.$refs[e.tab].reset()}))},setProps:function(){this.$refs[this.tab].setProps()},onSuccess:function(e){this.dialog.loading=!1,this.$emit("success",e)},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},onOpen:function(){this.onReset()}}},v=(o("10a5"),Object(i.a)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-dialog",e._b({attrs:{visible:e.visible_},on:{open:e.onOpen,"update:visible":function(t){e.visible_=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"添加",type:"success"},on:{click:e.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:e.onReset}})]},proxy:!0}])},"nm-dialog",e.dialog,!1),[o("el-tabs",{staticClass:"nm-dialog-tabs",attrs:{type:"card"},on:{"tab-click":e.setProps},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("el-tab-pane",{attrs:{name:"node"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"node"}}),e._v("节点 ")],1),o("node-menu",e._g({ref:"node",attrs:{parent:e.parent,sort:e.sort}},e.on))],1),o("el-tab-pane",{attrs:{name:"route"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"link"}}),e._v("路由菜单 ")],1),o("route-menu",e._g({ref:"route",attrs:{parent:e.parent,sort:e.sort}},e.on))],1),o("el-tab-pane",{attrs:{name:"link"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"transmit"}}),e._v("链接菜单 ")],1),o("link-menu",e._g({ref:"link",attrs:{parent:e.parent,sort:e.sort}},e.on))],1)],1)],1)}),[],!1,null,null,null)).exports,k=o("a34a"),y=o.n(k),w={data:function(){return{form:{noLoading:!0,action:$api.admin.menu.update,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["model","parent"],methods:{submit:function(){this.submitBefore&&this.submitBefore(),this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick((function(){e.$refs.form.reset()}))},setModel:function(){this.form.model=this.model},onSuccess:function(){this.$emit("success",{id:this.form.model.id,label:this.form.model.name,item:Object.assign({},this.form.model)})},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},x={mixins:[w]},$=Object(i.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,O={mixins:[w],components:{ModuleInfoSelect:c.a},data:function(){return{form:{model:{type:1,permissions:[],buttons:[]},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var e=[],t=this.form.model.moduleCode;return t?(this.$router.options.routes.forEach((function(o){o&&o.name&&o.name.toLowerCase().startsWith(t.toLowerCase())&&e.push({name:o.meta.title,code:o.name.toLowerCase(),permissions:o.meta.permissions,buttons:o.meta.buttons})})),e):e}},methods:{submitBefore:function(){for(var e=this,t=function(){var t=e.routes[o],r=e.form.model;if(t.code===r.routeName)return r.routeName=t.code,r.permissions=t.permissions,r.buttons=[],t.buttons&&Object.keys(t.buttons).map((function(e){r.buttons.push(t.buttons[e])})),"break"},o=0;o<this.routes.length;o++){if("break"===t())break}},onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code;break}}}}},C=Object(i.a)(O,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:e.form.model.moduleCode,callback:function(t){e.$set(e.form.model,"moduleCode",t)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onRouteChange},model:{value:e.form.model.routeName,callback:function(t){e.$set(e.form.model,"routeName",t)},expression:"form.model.routeName"}},e._l(e.routes,(function(t){return o("el-option",{key:t.code,attrs:{label:t.name,value:t.code}},[o("span",[e._v(e._s(t.name)+"("+e._s(t.code)+")")])])})),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.model.routeName,callback:function(t){e.$set(e.form.model,"routeName",t)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:e.form.model.routeParams,callback:function(t){e.$set(e.form.model,"routeParams",t)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:e.form.model.routeQuery,callback:function(t){e.$set(e.form.model,"routeQuery",t)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,_={mixins:[w],components:{TargetSelect:p},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},j=Object(i.a)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form",e._g(e._b({ref:"form"},"nm-form",e.form,!1),e.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:e.parent.path,callback:function(t){e.$set(e.parent,"path",t)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:e.form.model.url,callback:function(t){e.$set(e.form.model,"url",t)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:e.form.model.icon,callback:function(t){e.$set(e.form.model,"icon",t)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:e.form.model.iconColor,callback:function(t){e.$set(e.form.model,"iconColor",t)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:e.form.model.target,callback:function(t){e.$set(e.form.model,"target",t)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:e.form.model.dialogWidth,callback:function(t){e.$set(e.form.model,"dialogWidth",t)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:e.form.model.dialogHeight,callback:function(t){e.$set(e.form.model,"dialogHeight",t)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:e.form.model.dialogFullscreen,callback:function(t){e.$set(e.form.model,"dialogFullscreen",t)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:e.form.model.sort,callback:function(t){e.$set(e.form.model,"sort",t)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:e.form.model.show,callback:function(t){e.$set(e.form.model,"show",t)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.model.remarks,callback:function(t){e.$set(e.form.model,"remarks",t)},expression:"form.model.remarks"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,P=$api.admin.menu,N={mixins:[n.b.dialog],components:{NodeMenu:$,RouteMenu:C,LinkMenu:j},data:function(){return{model:{type:0},dialog:{footer:!0,title:"编辑菜单",icon:"add",width:"60%",class:"nm-admin-menu-edit",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","id"],methods:{edit:function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.id){e.next=3;break}return this._warning("请选择要编辑的菜单~"),e.abrupt("return");case 3:return this.dialog.loading=!0,e.next=6,y.a.awrap(P.edit(this.id));case 6:this.model=e.sent,this.setModel(),this.dialog.loading=!1;case 9:case"end":return e.stop()}}),null,this)},onOpen:function(){this.edit()},onSubmit:function(){this.dialog.loading=!0,this.getModel().submit()},onReset:function(){var e=this;this.$nextTick((function(){e.getModel().reset()}))},onSuccess:function(e){this.dialog.loading=!1,this.$emit("success",e)},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},setModel:function(){var e=this;this.$nextTick((function(){e.getModel().setModel()}))},getModel:function(){return 0===this.model.type?this.$refs.node:1===this.model.type?this.$refs.route:this.$refs.link}}},E=Object(i.a)(N,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-dialog",e._b({attrs:{visible:e.visible_},on:{open:e.onOpen,"update:visible":function(t){e.visible_=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"保存",type:"success"},on:{click:e.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:e.onReset}})]},proxy:!0}])},"nm-dialog",e.dialog,!1),[0===e.model.type?o("node-menu",e._g({ref:"node",attrs:{model:e.model,parent:e.parent}},e.on)):1===e.model.type?o("route-menu",e._g({ref:"route",attrs:{model:e.model,parent:e.parent}},e.on)):o("link-menu",e._g({ref:"link",attrs:{model:e.model,parent:e.parent}},e.on))],1)}),[],!1,null,null,null).exports,S=o("cf13"),L=$api.admin.menu,T={name:r.default.name,components:{MenuTree:S.a,AddPage:v,EditPage:E},data:function(){return{split:.2,curr:{id:""},list:{cols:l,action:L.query,labelWidth:"60px",model:{parentId:"",name:"",code:""}},remove:L.remove,total:0,dialog:{add:!1,edit:!1,sort:!1},menu:{id:"",name:"",path:""},buttons:r.default.buttons}},computed:{title:function(){return"菜单列表—"+this.menu.name},dragSort:function(){return{queryAction:this.querySortList,updateAction:L.updateSortList}}},methods:{refresh:function(){this.list.model.parentId=this.menu.id,this.$refs.list.refresh()},onTreeChange:function(e){var t=e.id,o=e.label,r=e.path,l=e.item;this.menu.id=t,this.menu.name=o,this.menu.isNode=0===l.type,this.menu.path=r.join(" / "),this.refresh()},add:function(e){this.total=e,this.dialog.add=!0},edit:function(e){this.curr=e,this.dialog.edit=!0},querySortList:function(){return L.querySortList(this.menu.id)},openSort:function(){this.dialog.sort=!0},onAdd:function(e){this.$refs.tree.insert(e),this.refresh()},onDelete:function(e){this.$refs.tree.remove(e),this.refresh()},onEdit:function(e){this.$refs.tree.update(e),this.refresh()},onSort:function(e){this.$refs.tree.sort(e),this.refresh()}}},D=Object(i.a)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-container",[o("nm-split",{scopedSlots:e._u([{key:"left",fn:function(){return[o("menu-tree",{ref:"tree",on:{change:e.onTreeChange}})]},proxy:!0},{key:"right",fn:function(){return[o("nm-list",e._b({ref:"list",attrs:{title:e.title},scopedSlots:e._u([{key:"querybar",fn:function(){return[o("el-form-item",{attrs:{label:"名称：",prop:"name"}},[o("el-input",{attrs:{clearable:""},model:{value:e.list.model.name,callback:function(t){e.$set(e.list.model,"name",t)},expression:"list.model.name"}})],1),o("el-form-item",{attrs:{label:"编码：",prop:"code"}},[o("el-input",{attrs:{clearable:""},model:{value:e.list.model.code,callback:function(t){e.$set(e.list.model,"code",t)},expression:"list.model.code"}})],1)]},proxy:!0},{key:"querybar-buttons",fn:function(t){var r=t.total;return[o("nm-button",e._b({attrs:{disabled:!e.menu.isNode},on:{click:function(t){return e.add(r)}}},"nm-button",e.buttons.add,!1)),o("nm-button",e._b({attrs:{disabled:!e.menu.isNode},on:{click:e.openSort}},"nm-button",e.buttons.sort,!1))]}},{key:"col-typeName",fn:function(t){var r=t.row;return[0===r.type?o("el-tag",{attrs:{type:"success"}},[e._v(e._s(r.typeName))]):e._e(),1===r.type?o("el-tag",{attrs:{type:"warning"}},[e._v(e._s(r.typeName))]):e._e(),2===r.type?o("el-tag",[e._v(e._s(r.typeName))]):e._e()]}},{key:"col-icon",fn:function(t){var r=t.row;return[r.icon?o("el-tooltip",{attrs:{content:r.icon,effect:"dark",placement:"right"}},[o("label",[o("nm-icon",{attrs:{name:r.icon,size:"20px"}})],1)]):o("label",[e._v("无")])]}},{key:"col-show",fn:function(t){var o=t.row;return[e._v(e._s(o.show?"是":"否"))]}},{key:"col-operation",fn:function(t){var r=t.row;return[o("el-dropdown",{attrs:{trigger:"click"}},[o("span",{staticClass:"el-dropdown-link"},[e._v(" 操作 "),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{staticClass:"nm-list-operation-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("nm-button",e._b({on:{click:function(t){return e.edit(r)}}},"nm-button",e.buttons.edit,!1))],1),o("el-dropdown-item",[o("nm-button-delete",e._b({attrs:{action:e.remove,id:r.id},on:{success:function(t){return e.onDelete(r.id)}}},"nm-button-delete",e.buttons.del,!1))],1)],1)],1)]}}])},"nm-list",e.list,!1))]},proxy:!0}]),model:{value:e.split,callback:function(t){e.split=t},expression:"split"}}),o("add-page",{attrs:{parent:e.menu,sort:e.total,visible:e.dialog.add},on:{"update:visible":function(t){return e.$set(e.dialog,"add",t)},success:e.onAdd}}),o("edit-page",{attrs:{parent:e.menu,id:e.curr.id,visible:e.dialog.edit},on:{"update:visible":function(t){return e.$set(e.dialog,"edit",t)},success:e.onEdit}}),o("nm-drag-sort-dialog",e._b({attrs:{visible:e.dialog.sort},on:{"update:visible":function(t){return e.$set(e.dialog,"sort",t)},success:e.onSort}},"nm-drag-sort-dialog",e.dragSort,!1))],1)}),[],!1,null,null,null);t.default=D.exports},"31e1":function(e,t,o){},"354f":function(e,t,o){"use strict";var r={mixins:[o("68f2").b.select],data:function(){return{action:$api.admin.moduleInfo.select}}},l=o("2877"),n=Object(l.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},"453e":function(e,t,o){},cdb7:function(e,t,o){"use strict";o.r(t);var r=o("2f62");function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=$api.admin.system,i={data:function(){return{form:{header:!1,action:a.updateBaseConfig,model:this.model},logoUrl:this.model.logo||"./images/logo.png"}},props:{model:Object},computed:n({},Object(r.c)("app/token",["accessToken"]),{logoUpload:function(){return{action:a.uploadLogoUrl(),headers:{Authorization:"Bearer "+this.accessToken},"show-file-list":!1,"before-upload":this.beforeLogoUpload,"on-success":this.handleLogoSuccess}}}),methods:n({},Object(r.b)("app/system",["setBaseConfig"]),{beforeLogoUpload:function(e){return"image/jpeg"!==e.type&&"image/png"!==e.type?(this._error("上传Logo图片只能是 JPG/PNG 格式!"),!1):!(e.size/1024>512&&(this._error("上传Logo图片大小不能超过 500KB!"),1))},handleLogoSuccess:function(e){1===e.code&&(this.form.model.logo=e.data.fullPath,this.logoUrl=e.data.url)},onSuccess:function(){var e=this.form.model,t=e.title,o=e.home,r=e.userInfoPage,l=e.copyright;this.setBaseConfig({title:t,home:o,userInfoPage:r,copyright:l,logo:this.logoUrl})}}),watch:{model:function(){this.form.model=this.model,this.logoUrl=this.model.logo||"./images/logo.png"}}},m=(o("0e9e"),o("2877")),c=Object(m.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form-page",e._b({on:{success:e.onSuccess}},"nm-form-page",e.form,!1),[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"标题：",prop:"title"}},[o("el-input",{model:{value:e.form.model.title,callback:function(t){e.$set(e.form.model,"title",t)},expression:"form.model.title"}})],1),o("el-form-item",{attrs:{label:"首页：",prop:"home"}},[o("el-input",{model:{value:e.form.model.home,callback:function(t){e.$set(e.form.model,"home",t)},expression:"form.model.home"}})],1)],1),o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"Logo：",prop:"logo"}},[o("el-upload",e._b({staticClass:"logo-uploader"},"el-upload",e.logoUpload,!1),[e.logoUrl?o("img",{staticClass:"logo-uploader-img",attrs:{src:e.logoUrl}}):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})])],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"个人信息页：",prop:"userInfoPage"}},[o("el-input",{attrs:{placeholder:"路由名称，默认为userinfo"},model:{value:e.form.model.userInfoPage,callback:function(t){e.$set(e.form.model,"userInfoPage",t)},expression:"form.model.userInfoPage"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"版权申明：",prop:"copyright"}},[o("el-input",{attrs:{placeholder:"版权声明：XXXXXX"},model:{value:e.form.model.copyright,callback:function(t){e.$set(e.form.model,"copyright",t)},expression:"form.model.copyright"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d=$api.admin.system,p={data:function(){return{form:{header:!1,action:d.updatePermissionConfig,model:this.model}}},props:{model:Object},methods:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(r.b)("app/system",["setPermissionConfig"]),{onSuccess:function(){this.setBaseConfig(this.form.model)}}),watch:{model:function(){this.form.model=this.model}}},b=Object(m.a)(p,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form-page",e._b({on:{success:e.onSuccess}},"nm-form-page",e.form,!1),[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"权限验证：",prop:"validate"}},[o("el-switch",{model:{value:e.form.model.validate,callback:function(t){e.$set(e.form.model,"validate",t)},expression:"form.model.validate"}})],1)],1),o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"按钮权限：",prop:"button"}},[o("el-switch",{model:{value:e.form.model.button,callback:function(t){e.$set(e.form.model,"button",t)},expression:"form.model.button"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"审计日志：",prop:"auditing"}},[o("el-switch",{model:{value:e.form.model.auditing,callback:function(t){e.$set(e.form.model,"auditing",t)},expression:"form.model.auditing"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){v(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var k=$api.admin.system,y={data:function(){return{form:{header:!1,action:k.updateLoginConfig,model:this.model}}},props:{model:Object},computed:g({},Object(r.c)("app/system",{typeOptions:function(e){return e.config.login.typeOptions}})),methods:g({},Object(r.b)("app/system",["setLoginConfig"]),{onSuccess:function(){this.setLoginConfig(this.form.model)}}),watch:{model:function(){this.form.model=this.model}}},w=Object(m.a)(y,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form-page",e._b({on:{success:e.onSuccess}},"nm-form-page",e.form,!1),[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"登录页：",prop:"type"}},[o("el-select",{model:{value:e.form.model.type,callback:function(t){e.$set(e.form.model,"type",t)},expression:"form.model.type"}},e._l(e.typeOptions,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"启用验证码：",prop:"verifyCode"}},[o("el-switch",{model:{value:e.form.model.verifyCode,callback:function(t){e.$set(e.form.model,"verifyCode",t)},expression:"form.model.verifyCode"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function x(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function $(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var O=$api.admin.system,C={data:function(){return{form:{header:!1,action:O.updateToolbarConfig,model:this.model}}},props:{model:Object},methods:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?x(Object(o),!0).forEach((function(t){$(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(r.b)("app/system",["setToolbarConfig"]),{onSuccess:function(){this.setToolbarConfig(this.form.model)}}),watch:{model:function(){this.form.model=this.model}}},_=Object(m.a)(C,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form-page",e._b({on:{success:e.onSuccess}},"nm-form-page",e.form,!1),[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"全屏控制：",prop:"fullscreen"}},[o("el-switch",{model:{value:e.form.model.fullscreen,callback:function(t){e.$set(e.form.model,"fullscreen",t)},expression:"form.model.fullscreen"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"皮肤设置：",prop:"skin"}},[o("el-switch",{model:{value:e.form.model.skin,callback:function(t){e.$set(e.form.model,"skin",t)},expression:"form.model.skin"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"退出按钮：",prop:"logout"}},[o("el-switch",{model:{value:e.form.model.logout,callback:function(t){e.$set(e.form.model,"logout",t)},expression:"form.model.logout"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"用户信息：",prop:"userInfo"}},[o("el-switch",{model:{value:e.form.model.userInfo,callback:function(t){e.$set(e.form.model,"userInfo",t)},expression:"form.model.userInfo"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var N=$api.admin.system,E={data:function(){return{form:{header:!1,action:N.updateComponentConfig,model:this.model}}},props:{model:Object},methods:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(Object(o),!0).forEach((function(t){P(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(r.b)("app/system",["setComponentConfig"]),{onSuccess:function(){this.setComponentConfig(this.form.model)}}),watch:{model:function(){this.form.model=this.model}}},S=Object(m.a)(E,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-form-page",e._b({on:{success:e.onSuccess}},"nm-form-page",e.form,!1),[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{labelWidth:"160px",label:"菜单只能打开一个",prop:"menu.uniqueOpened"}},[o("el-switch",{model:{value:e.form.model.menu.uniqueOpened,callback:function(t){e.$set(e.form.model.menu,"uniqueOpened",t)},expression:"form.model.menu.uniqueOpened"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{labelWidth:"200px",label:"点击模态框可关闭对话框",prop:"dialog.closeOnClickModal"}},[o("el-switch",{model:{value:e.form.model.dialog.closeOnClickModal,callback:function(t){e.$set(e.form.model.dialog,"closeOnClickModal",t)},expression:"form.model.dialog.closeOnClickModal"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{labelWidth:"200px",label:"列表页序号表头名称",prop:"list.serialNumberName"}},[o("el-input",{attrs:{placeholder:"默认 #"},model:{value:e.form.model.list.serialNumberName,callback:function(t){e.$set(e.form.model.list,"serialNumberName",t)},expression:"form.model.list.serialNumberName"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"自定义Css",prop:"customCss"}},[o("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入自定义Css"},model:{value:e.form.model.customCss,callback:function(t){e.$set(e.form.model,"customCss",t)},expression:"form.model.customCss"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,L=$api.admin.system,T={components:{BaseConfig:c,PermissionConfig:b,LoginConfig:w,ToolbarConfig:_,ComponentConfig:S},data:function(){return{tab:"base",config:{base:{title:"",logo:"",home:"",userInfoPage:"",copyright:""},permission:{validate:!0,button:!1,auditing:!1},login:{type:null,verifyCode:!1},toolbar:{fullscreen:!0,skin:!0,logout:!0,userInfo:!0},component:{menu:{uniqueOpened:!1},dialog:{closeOnClickModal:!1},list:{serialNumberName:null},customCss:null}}}},methods:{onTabClick:function(){var e=this;this.$nextTick((function(){e.$refs[e.tab]&&e.$refs[e.tab].doLayout&&e.$refs[e.tab].doLayout()}))}},created:function(){var e=this;L.getConfig().then((function(t){e.config=t}))}},D=Object(m.a)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-container",[o("nm-tabs",[o("el-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("el-tab-pane",{attrs:{name:"base"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"basic-data"}}),e._v("基础配置 ")],1),o("base-config",{attrs:{model:e.config.base}})],1),o("el-tab-pane",{attrs:{name:"permission"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"permission"}}),e._v("权限配置 ")],1),o("permission-config",{attrs:{model:e.config.permission}})],1),o("el-tab-pane",{attrs:{name:"login"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"login"}}),e._v("登录配置 ")],1),o("login-config",{attrs:{model:e.config.login}})],1),o("el-tab-pane",{attrs:{name:"toolbar"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"tools"}}),e._v("顶部工具栏 ")],1),o("toolbar-config",{attrs:{model:e.config.toolbar}})],1),o("el-tab-pane",{attrs:{name:"component"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"entity"}}),e._v("组件配置 ")],1),o("component-config",{attrs:{model:e.config.component}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=D.exports},cf13:function(e,t,o){"use strict";var r=$api.admin.menu,l={data:function(){return{tree:{data:[],nodeKey:"id",highlightCurrent:!0,props:{children:"children",label:"label"},currentNodeKey:"00000000-0000-0000-0000-000000000000",expandOnClickNode:!1,defaultExpandedKeys:["00000000-0000-0000-0000-000000000000"]},on:{"current-change":this.onChange,"node-expand":this.onNodeExpand,"node-collapse":this.onNodeCollapse,"check-change":this.onCheckChange,check:this.onCheck},selection:null}},props:{refreshOnCreated:{type:Boolean,default:!0},showCheckbox:Boolean,defaultExpandAll:Boolean},methods:{refresh:function(e){var t=this;r.getTree().then((function(o){t.tree.data=[o],e?t.onChange(o):t.$nextTick((function(){t.$refs.tree.setCurrentKey(t.tree.currentNodeKey)}))}))},onChange:function(e,t){this.selection!==e&&(this.tree.currentNodeKey=e.id,this.selection=e,this.$emit("change",this.selection,t))},onCheck:function(e,t){this.$emit("check",e,t)},onCheckChange:function(e,t){this.$emit("check-change",e,t)},onNodeExpand:function(e){this.tree.defaultExpandedKeys.push(e.id)},onNodeCollapse:function(e){this.$_.pull(this.tree.defaultExpandedKeys,e.id)},insert:function(e){e.path=this.selection.path.concat([e.label]),e.children||(e.children=[]);var t=this.selection.children;if(t.length<1)t.push(e);else for(var o=0;o<t.length;o++){if(e.item.sort<t[o].item.sort){t.splice(o,0,e);break}if(o===t.length-1){t.push(e);break}}},remove:function(e){for(var t=this.selection.children,o=0;o<t.length;o++){var r=t[o];if(e===r.id)return t.splice(o,1),r}},update:function(e){var t=this.$refs.tree.getNode(e.id).expanded;t||this.$_.pull(this.tree.defaultExpandedKeys,e.id),e.children=this.remove(e.id).children,this.insert(e),t&&this.tree.defaultExpandedKeys.push(e.id)},setCheckedKeys:function(e){var t=this;this.$nextTick((function(){t.showCheckbox&&t.$refs.tree.setCheckedKeys(e)}))},sort:function(){this.refresh()}},created:function(){this.refreshOnCreated&&this.refresh(!0)}},n=o("2877"),s=Object(n.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nm-box",{attrs:{page:"",header:"",refresh:"",title:"菜单预览",icon:"menu"},on:{refresh:e.refresh}},[o("el-tree",e._g(e._b({ref:"tree",staticClass:"nm-tree",attrs:{"show-checkbox":e.showCheckbox,"default-expand-all":e.defaultExpandAll},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return o("span",{},[o("nm-icon",{attrs:{name:r.item.icon||"attachment"}}),o("span",{staticClass:"nm-m-l-5"},[e._v(e._s(r.label))])],1)}}])},"el-tree",e.tree,!1),e.on))],1)}),[],!1,null,null,null);t.a=s.exports}}]);